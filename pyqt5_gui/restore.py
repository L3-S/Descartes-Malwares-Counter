from paramiko import SSHClient
from scp import SCPClient
import zipfile
import os
import clamd
import datetime






class Restore():

	def __init__ (self):
		self.files_to_restore = []
		

	def getFiles(self):
		files = os.listdir("backups/")
		for file in files :
			n_file = []
			tmp    = os.stat("/home/pi/qt/backups/"+file)
			t = os.path.getmtime("/home/pi/qt/backups/"+file)
			n_file.append(str(datetime.datetime.fromtimestamp(t)))
			n_file.append(str(file))
			n_file.append(tmp[6])
			self.files_to_restore.append(n_file)
		self.files_to_restore.pop(0)
		return self.files_to_restore


	def restoreFiles(self, file_name):

		os.system("cp /home/pi/Backups/"+file_name+" /home/pi/shared/")
		print("FILES SENDED")



	def restoreScanner(self, file_name, ssh):
		ssh.exec_command("mkdir /tmp/" + file_name)
		



