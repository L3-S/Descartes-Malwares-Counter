# -*- coding: utf-8 -*-

# Form implementation generated from reading ui file 'usageWindow.ui'
#
# Created by: PyQt5 UI code generator 5.12
#
# WARNING! All changes made in this file will be lost!

from PyQt5 import QtCore, QtGui, QtWidgets
from PyQt5.QtCore import Qt, pyqtSignal
import shutil
import psutil

class Ui_usageDialog(object):


    def setupUi(self, usageDialog):
        usageDialog.setObjectName("usageDialog")
        usageDialog.resize(435, 290)
        self.verticalLayout = QtWidgets.QVBoxLayout(usageDialog)
        self.verticalLayout.setObjectName("verticalLayout")
        self.horizontalLayout = QtWidgets.QHBoxLayout()
        self.horizontalLayout.setObjectName("horizontalLayout")
        self.hdProgressBar = QtWidgets.QProgressBar(usageDialog)
        #get hd infos
        total_t , used_t, free_t = self.get_hd_infos()
        self.hdProgressBar.setProperty("value", (used_t*100)/ total_t)
        self.hdProgressBar.setObjectName("hdProgressBar")
        self.horizontalLayout.addWidget(self.hdProgressBar)
        # get ram infos
        mem_percent = psutil.virtual_memory()[2]
        self.memoryProgressBar = QtWidgets.QProgressBar(usageDialog)
        self.memoryProgressBar.setProperty("value", mem_percent)
        self.memoryProgressBar.setObjectName("memoryProgressBar")
        self.horizontalLayout.addWidget(self.memoryProgressBar)
        #get cpu infos
        cpu_percent = psutil.cpu_percent()
        self.cpuProgressBar = QtWidgets.QProgressBar(usageDialog)
        self.cpuProgressBar.setProperty("value", cpu_percent)
        self.cpuProgressBar.setObjectName("cpuProgressBar")
        self.horizontalLayout.addWidget(self.cpuProgressBar)
        self.verticalLayout.addLayout(self.horizontalLayout)
        self.horizontalLayout_3 = QtWidgets.QHBoxLayout()
        self.horizontalLayout_3.setObjectName("horizontalLayout_3")
        self.hdLabel = QtWidgets.QLabel(usageDialog)
        self.hdLabel.setObjectName("hdLabel")
        self.horizontalLayout_3.addWidget(self.hdLabel)
        self.memoryLabel = QtWidgets.QLabel(usageDialog)
        self.memoryLabel.setObjectName("memoryLabel")
        self.horizontalLayout_3.addWidget(self.memoryLabel)
        self.cpuLabel = QtWidgets.QLabel(usageDialog)
        self.cpuLabel.setObjectName("cpuLabel")
        self.horizontalLayout_3.addWidget(self.cpuLabel)
        self.verticalLayout.addLayout(self.horizontalLayout_3)

        self.retranslateUi(usageDialog)
        QtCore.QMetaObject.connectSlotsByName(usageDialog)

    def retranslateUi(self, usageDialog):
        _translate = QtCore.QCoreApplication.translate
        usageDialog.setWindowTitle(_translate("usageDialog", "Raspberry PI usage"))
        self.hdLabel.setText(_translate("usageDialog", "Hard Disk "))
        self.memoryLabel.setText(_translate("usageDialog", "Memory usage"))
        self.cpuLabel.setText(_translate("usageDialog", "CPU Usage"))


    def get_hd_infos(self):
        total_r, used_r, free_r = shutil.disk_usage("/")
        total_h, used_h, free_h = shutil.disk_usage("/home")
        total_t = (total_h + total_r) // (2**30)
        used_t  = (used_h  + used_r) // (2**30)
        free_t  = (free_h  + free_r) // (2**30)
        return (total_t, used_t, free_t)

 