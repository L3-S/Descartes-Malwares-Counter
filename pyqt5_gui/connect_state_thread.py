from PyQt5.QtCore import QThread, pyqtSignal
from PyQt5 import QtWidgets
import time
import socket
import os

class ConnectStateThread(QThread):

	connection_state = pyqtSignal(str)
	def __init__(self):
		QThread.__init__(self)


	def __del__(self):
		self.wait()

	def run(self):
		while True :
			hostname_local    = "10.42.0.178"
			hostname_internet = "www.google.com"
			result_local      = os.system("ping -c 1 " + hostname_local + ">> /dev/null")
			try :
				socket.create_connection(("www.google.com", 80))
				result_internet = 0
			except OSError:
				result_internet = 1
			if result_local == 0 and result_internet == 0:
			   self.connection_state.emit("LOCAL+INTERNET")
			elif result_local != 0 and result_internet == 0:
				self.connection_state.emit("INTERNET")
			elif result_local == 0 and result_internet != 0:
				self.connection_state.emit("LOCAL")
			else:
			   self.connection_state.emit("WALOU")
			time.sleep(3)
		
			






